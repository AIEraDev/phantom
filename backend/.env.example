# =============================================================================
# PHANTOM BACKEND - Environment Configuration
# =============================================================================
# This file configures the backend service.
# Copy this to .env and fill in your values.
#
# FOR HACKATHON JUDGES:
# - This is the main backend configuration file
# - EXECUTION_BACKEND controls how user code is executed
# - Development: Docker (local containers)
# - Production: Judge0 Cloud (scalable API)
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://phantom:phantom_dev_password@localhost:5432/phantom

# -----------------------------------------------------------------------------
# REDIS
# -----------------------------------------------------------------------------
# Redis connection for caching, sessions, and real-time features
REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# AUTHENTICATION
# -----------------------------------------------------------------------------
# JWT secret for signing tokens
JWT_SECRET=dev_jwt_secret_change_in_production

# -----------------------------------------------------------------------------
# AI FEATURES (Optional)
# -----------------------------------------------------------------------------
# Gemini API key for AI-powered code judging and hints
# Get your key at: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your-gemini-api-key

# -----------------------------------------------------------------------------
# DOCKER (for local code execution)
# -----------------------------------------------------------------------------
# Docker socket path for container management
# macOS/Linux: unix:///var/run/docker.sock
# Windows: npipe:////./pipe/docker_engine
DOCKER_HOST=unix:///var/run/docker.sock

# -----------------------------------------------------------------------------
# CODE EXECUTION BACKEND
# -----------------------------------------------------------------------------
# Phantom supports two code execution backends:
#
# ┌─────────────────────────────────────────────────────────────────────────┐
# │  DOCKER (Default - Best for Development)                                │
# ├─────────────────────────────────────────────────────────────────────────┤
# │  • Runs code in isolated Docker containers on your machine              │
# │  • Requires Docker Desktop to be running                                │
# │  • No external API keys needed                                          │
# │  • Full control over execution environment                              │
# │  • Supports: JavaScript (Node.js), Python 3, TypeScript                 │
# └─────────────────────────────────────────────────────────────────────────┘
#
# ┌─────────────────────────────────────────────────────────────────────────┐
# │  JUDGE0 (Recommended for Production)                                    │
# ├─────────────────────────────────────────────────────────────────────────┤
# │  • Uses Judge0 Cloud API (https://judge0.com)                           │
# │  • No Docker infrastructure needed in production                        │
# │  • Automatic scaling and load balancing                                 │
# │  • Built-in security sandboxing                                         │
# │  • Supports: JavaScript (Node.js), Python 3, TypeScript                 │
# │  • Free tier: 50 requests/day (sufficient for demos)                    │
# └─────────────────────────────────────────────────────────────────────────┘
#
# Options: 'docker' or 'judge0'
EXECUTION_BACKEND=docker

# Judge0 Cloud API Key
# Only required when EXECUTION_BACKEND=judge0
# Get your FREE API key at: https://rapidapi.com/judge0-official/api/judge0-ce
#
# If EXECUTION_BACKEND=judge0 but no API key is set, the system automatically
# falls back to Docker execution with a warning logged.
JUDGE0_API_KEY=your-judge0-api-key

# -----------------------------------------------------------------------------
# SERVER
# -----------------------------------------------------------------------------
# Node environment: 'development' or 'production'
NODE_ENV=development

# Backend server port
PORT=3001

# -----------------------------------------------------------------------------
# CORS
# -----------------------------------------------------------------------------
# Frontend URL for CORS configuration
FRONTEND_URL=http://localhost:3000

# Allowed origins (comma-separated for multiple)
ALLOWED_ORIGINS=http://localhost:3000
